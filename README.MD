# Симуляция потока жидкости с использованием клеточного газового автомата (LGA) по модели FHP-II

## Описание
Программа реализует двумерный клеточный газовый автомат на квадратной решётке N×N.  
Модель FHP-II используется для моделирования потока жидкости через дискретные частицы, движущиеся и сталкивающиеся в 8 направлениях.

### Функционал:
- Инициализация решётки с заданной плотностью частиц.
- Поддержка столкновений по правилам FHP-II (двух- и трёхчастичные).
- Обработка препятствий и отражение частиц.
- Периодические граничные условия и источник частиц слева.
- Визуализация состояния решётки в консоли.
- Сохранение и загрузка состояния из бинарного файла (`grid.bin`).
- Расчёт средней плотности и скорости потока.

---

## Требования

- Компилятор C (например, `gcc`)
- ОС Linux / Windows / macOS
- Базовые инструменты разработки

---

## Как собрать проект

### 1. Компиляция программы

```bash
gcc -o lga_sim main.c
```

---

## Как использовать

### 1. Запуск программы

```bash
./lga_sim
```

Вы увидите приглашение:

```
Generate new (0). Load from file (1): 
```

#### Вариант 0: Создание новой решётки

Введите параметры:
```
Enter N p x y w h iteration: 
```

Где:
- `N`: размер решётки (N × N)
- `p`: вероятность начального заполнения частицами [0.0 ... 1.0]
- `x`, `y`: координаты верхнего левого угла препятствия
- `w`, `h`: ширина и высота препятствия
- `iteration`: количество шагов симуляции

#### Вариант 1: Загрузка из файла

Если вы уже запускали программу ранее и сохранили состояние в `grid.bin`, выберите этот вариант.

Программа загрузит предыдущее состояние и запросит количество итераций для продолжения симуляции.

---

## Пример использования

### Пример 1: Генерация новой решётки

```bash
Generate new (0). Load from file (1): 0
Enter N p x y w h iteration: 10 0.3 3 3 2 2 100
```

Результат:
- Решётка 10×10 создаётся со случайным распределением частиц (плотность ~30%)
- Препятствие 2×2 находится на позиции (3,3)
- Производится 100 итераций симуляции

### Пример 2: Загрузка из файла

```bash
Generate new (0). Load from file (1): 1
Enter the number of iterations: 50
```

Результат:
- Загружается состояние из `grid.bin`
- Делается ещё 50 итераций

---

## Пример работы программы

После выполнения симуляции вы можете увидеть следующий вывод:

```
Initial state
* * # # # * . . # # 
* # # # # # * * * * 
. # * # * * * * * * 
* . # X X * # * * * 
# # * X X * # * * . 
* . # # * * # # * * 
. # # * * # # * * * 
# # * # * * * # . * 
* # * # * # * # * *
* # * # * # * * # #

Final state
# * * * # # * . * *
# * * * * * * * . *
* * * * * * * * * *
# * * X X * . * * #
* * # X X . * . # *
* * * # # * * # * *
# * # * * . * . * #
* * * . * * * * * #
# * * * * * * * # *
* * # * * * * * * *

Average density: 1.670000
Flow rate: (0.365269, 0.125749)
```

---

## Выходные данные

После выполнения симуляции программа выводит:

- Конечное состояние решётки (символьная визуализация):
    - `.` — нет частиц
    - `*` — 1–2 частицы
    - `#` — 3+ частицы
    - `X` на красном фоне — препятствие

- Среднюю плотность частиц
- Горизонтальную и вертикальную компоненты скорости потока

---

## Сохранение состояния

После каждой симуляции текущее состояние решётки сохраняется в файл `grid.bin`. Это позволяет продолжить симуляцию в следующий раз.


---
