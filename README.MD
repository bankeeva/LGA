# Моделирование потока жидкости с использованием клеточного газового автомата (LGA)

## Описание проекта

Этот проект реализует двумерное моделирование течения жидкости с использованием модифицированной модели FHP-II клеточного газового автомата на квадратной сетке размером N×N. Программа симулирует движение частиц, их столкновения и взаимодействие с препятствиями.

## Основные возможности

- **Модель FHP-II**: Реализация решетки с 8 направлениями движения (N, NE, E, SE, S, SW, W, NW) и правилами столкновений для 2 и 3 частиц
- **Обработка препятствий**: Поддержка прямоугольных препятствий с отражением частиц
- **Граничные условия**: Периодические граничные условия для непрерывного моделирования
- **Источник частиц**: Постоянный источник частиц с левой границы
- **Визуализация**: Цветной вывод состояния системы в консоль
- **Сохранение/загрузка**: Возможность сохранения состояния сетки в файл и загрузки для продолжения расчетов

## Параметры запуска

Программа может работать в двух режимах:

1. **Создание новой сетки**:
   ```
   Введите N p x y w h iteration:
   ```
   Где:
    - N - размер сетки (N×N)
    - p - вероятность появления частицы в направлении (0-1)
    - x,y - координаты левого верхнего угла препятствия
    - w,h - ширина и высота препятствия
    - iteration - количество шагов моделирования

2. **Загрузка из файла**:
   ```
   Введите 1 для загрузки из файла
   ```
   Затем указывается количество итераций для продолжения моделирования

## Выходные данные

- Визуализация состояния сетки в консоли:
    - `.` - пустая ячейка (серый)
    - `*` - ячейка с 1-2 частицами (зеленый)
    - `#` - ячейка с 3+ частицами (желтый)
    - ` ` - препятствие (красный фон)

- После завершения расчетов выводятся:
    - Средняя плотность частиц
    - Компоненты скорости потока (vx, vy)

- Состояние сетки сохраняется в файл `grid.bin`

## Технические детали

- Реализованы все основные этапы LGA:
    1. Распространение частиц
    2. Столкновения частиц
    3. Обработка граничных условий
    4. Взаимодействие с препятствиями

- Используется битовая маска для хранения направлений частиц (8 бит на ячейку)

## Сборка и запуск

Для компиляции и запуска:
```
gcc main.c -o fluid_simulation
./fluid_simulation
```

## Пример использования

1. Создать сетку 20×20 с плотностью 0.3, препятствием 5×5 в центре и выполнить 100 итераций:
```
0
20 0.3 7 7 5 5 100
```

2. Продолжить расчеты из сохраненного файла еще на 50 итераций:
```
1
50
```
